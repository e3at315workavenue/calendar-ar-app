<script>
  document.addEventListener('DOMContentLoaded', () => {
    const videos = Array.from({ length: 12 }, (_, i) => document.getElementById(`${i}`));
    const videoTargets = document.querySelectorAll('[mindar-image-target]');
    
    // Function to pause all videos
    const pauseAllVideos = () => {
      videos.forEach((video) => {
        video.pause();
        video.currentTime = 0; // Reset video to start
      });
    };

    // Function to enable audio and hide the overlay
    const enableAudio = () => {
      videos.forEach((video) => {
        video.muted = false; // Enable audio for all videos
      });

      // Hide the overlay
      document.getElementById('overlay').style.display = 'none';

      // Remove the event listener to avoid redundant calls
      document.removeEventListener('click', enableAudio);
    };

    // Listen for user tap to enable audio
    document.addEventListener('click', enableAudio);

    // Handle play/pause for each video based on target visibility
    videoTargets.forEach((target, index) => {
      const video = videos[index];

      target.addEventListener('targetFound', () => {
        console.log(`Target ${index} detected! Playing video...`);
        pauseAllVideos(); // Pause all videos first
        video.play(); // Play the correct video
      });

      target.addEventListener('targetLost', () => {
        console.log(`Target ${index} lost! Pausing video...`);
        video.pause(); // Pause the current video
        video.currentTime = 0; // Reset the video
      });
    });
  });
</script>
